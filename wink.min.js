(function(){function f(b,c){if(!b)return[];if("string"==typeof b){if(c=c||document,b=b.replace(/^\s+|\s+$/g,""),a.test(b)){var d=b.charAt(0),e="#"===d?"id":"."===d?"class":"tag";return b="id"===e||"class"===e?b.substring(1):b,g(e,b,c)}if(c.querySelectorAll)return h(c.querySelectorAll(b));if(-1!==b.indexOf(",")){for(var m=b.split(","),n=[],o=0,p=m.length;p>o;o++)n=n.concat(f(m[o]));return l(n)}var q=b.match(/\S+/g),r=q.pop(),s=[],t=i(r),u=t.id,v=t.className,w=t.tagName,x=t.attrs;return s=u&&g("id",u,c)||[],s=s.length?v?j(s,v,function(a){return this.className===a}):s:v?g("class",v,c):[],s=s.length?w?j(s,w,function(a){return this.nodeName.toLowerCase()===a.toLowerCase()}):s:w?g("tag",w,c):[],s=s.length?x.length?j(s,x,function(a){return this.getAttribute(a[1])==a[2]}):s:x.length?j(g("tag","*",c),x,function(a){return this.getAttribute(a[1])===a[2]}):[],q.length?k(q,s):s}return b.nodeType?[b]:[]}function g(a,b,c){var d=[];switch(a){case"id":el=document.getElementById(b),el&&d.push(el);break;case"class":if(c.getElementsByClassName)d=h(c.getElementsByClassName(b));else for(var e=c.all||c.getElementsByTagName("*"),f=0,g=e.length;g>f;f++){var i=e[f].className;i&&RegExp("\\s*"+b+"\\s*","g").test(i)&&d.push(e[f])}break;case"tag":d=h(c.getElementsByTagName(b))}return d}function h(a){try{return Array.prototype.slice.call(a)}catch(b){for(var c=[],d=0,e=a.length;e>d;++d)c.push(a[d]);return c}}function i(a){return{id:(a.match(b)||[])[1],className:(a.match(c)||[])[1],tagName:(a.match(d)||[])[1],attrs:a.match(e)||[]}}function j(a,b,c){for(var d=[],e=0,f=a.length;f>e;e++)c.call(a[e],b)&&d.push(a[e]);return d}function k(a,b,c){var d=a.pop(),e=[],f=[];if(">"===d){c=c||b;for(var g=k(a,c,!0,"return index of elements"),h=0,j=g.length;j>h;h++)e.push(b[g[h]]),f.push(c[g[h]]);return a.length?k(a,e,f):e}for(var l=i(d),m=l.id,n=l.className,o=l.tagName,p=l.attrs,q=4===arguments.length?!0:!1,r=0,s=b.length;s>r;r++){var t="object"==typeof c?c&&c[r]:b[r],t=t.parentNode;do{if(!t)break;var u=!m||t.id===m;if(u=u&&(!o||o.toLowerCase()===t.nodeName.toLowerCase()),u=u&&(!n||RegExp("(^|\\s)"+n+"(\\s|$)").test(t.className)),u=u&&(!p.length||t.getAttribute(p[1])===p[2]),c===!0||u){u&&(f.push(t),q?e.push(r):e.push(b[r]));break}}while(t=t.parentNode)}return a.length>0?k(a,e,f):e}function l(a){for(var b=a.concat(),c=0;b.length>c;c++)for(var d=c+1;b.length>d;d++)b[d]===b[c]&&(b.splice(d,1),d--);return b}var a=/^[#\.\w][\w-]+$/,b=/#([\w\-_]+)/,c=/\.([\w\-_]+)/,d=/^([\w\-_\*]+)/,e=/\[([\w-]+)=[\"\']?([^\'\"]+)[\"\']?\]$/;this.wink=f})();