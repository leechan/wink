/**
 * A Tiny CSS Selector Engine â€”â€” wink
 * Copyright (c) 2013 lichen(http://leechan.me/)
 * -------------------------------------------------------
 * Dual licensed under the MIT and GPL licenses.
 *    - http://www.opensource.org/licenses/mit-license.php
 *    - http://www.gnu.org/copyleft/gpl.html
 * -------------------------------------------------------
 */
;(function(){function f(b,c){if(!b)return[];if("string"==typeof b){if(c=c||document,b=b.replace(/^\s+|\s+$/g,""),a.test(b)){var d=b.charAt(0),e="#"===d?"id":"."===d?"class":"tag";return g(e,b,c)}if(c.querySelectorAll)return h(c.querySelectorAll(b));if(-1!==b.indexOf(",")){for(var m=b.split(","),n=[],o=0,p=m.length;p>o;o++)n=n.concat(f(m[o]));return l(n)}var q=b.match(/\S+/g),r=q.pop(),s=[],t=i(r),u=t.id,v=t.className,w=t.tagName,x=t.attrs;return s=u&&g("id",u,c)||[],s=s.length?v?j(s,v,function(a){return this.className===a}):s:v?g("class",v,c):[],s=s.length?w?j(s,w,function(a){return this.nodeName.toLowerCase()===a.toLowerCase()}):s:w?g("tag",w,c):[],s=s.length?x.length?j(s,x,function(a){return this.getAttribute(a[1])===a[2]}):s:x.length?j(g("tag","*",c),x,function(a){return this.getAttribute(a[1])===a[2]}):[],q.length?k(q,s):s}return b.nodeType?[b]:[]}function g(a,b,c){var d=[];switch(a){case"id":el=document.getElementById(b),el&&d.push(el);break;case"class":if(c.getElementsByClassName)d=h(c.getElementsByClassName(b));else for(var e=c.all||c.getElementsByTagName("*"),f=0,g=e.length;g>f;f++){var i=e[f].className;i&&RegExp("\\s*"+b+"\\s*","g").test(i)&&d.push(e[f])}break;case"tag":d=h(c.getElementsByTagName(b))}return d}function h(a){try{return Array.prototype.slice.call(a)}catch(b){for(var c=[],d=0,e=a.length;e>d;++d)c.push(a[d]);return c}}function i(a){return{id:(a.match(b)||[])[1],className:(a.match(c)||[])[1],tagName:(a.match(d)||[])[1],attrs:a.match(e)||[]}}function j(a,b,c){for(var d=[],e=0,f=a.length;f>e;e++)c.call(a[e],b)&&d.push(a[e]);return d}function k(a,b,c){var d=a.pop(),e=[];if(">"===d)return k(a,b,!0);for(var f=i(d),g=f.id,h=f.className,j=f.tagName,l=f.attrs,m=0,n=b.length;n>m;m++){var o=b[m].parentNode;do{var p=!g||o.id===g;if(p=p&&(!j||j===o.nodeName.toLowerCase()),p=p&&(!h||RegExp("(^|\\s)"+h+"(\\s|$)").test(o.className)),p=p&&(!l.length||o.getAttribute(l[1])===l[2]),c||p){p&&e.push(b[m]);break}}while(o=o.parentNode)}return a.length>0?k(a,e):e}function l(a){for(var b=a.concat(),c=0;b.length>c;c++)for(var d=c+1;b.length>d;d++)b[d]===b[c]&&(b.splice(d,1),d--);return b}var a=/^[#\.\w][\w-]+$/,b=/#([\w\-_]+)/,c=/\.([\w\-_]+)/,d=/^([\w\-_\*]+)/,e=/\[([\w-]+)=[\"\']?([^\']+)[\"\']?\]$/;this.wink=f})();